{"version":3,"sources":["./src/app/account/account.page.html","./src/app/account/account-routing.module.ts","./src/app/account/account.module.ts","./src/app/account/account.page.scss","./src/app/account/account.page.ts","./src/services/user.service.ts"],"names":[],"mappings":"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","file":"account-account-module-es2015.js","sourcesContent":["export default \"<ion-header translucent=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>Cuenta</ion-title>\\n    <ion-buttons slot=\\\"primary\\\">\\n      <ion-button (click)=\\\"handleEdit()\\\">{{ editButtonTitle }}</ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content fullscreen=\\\"true\\\">\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Cuenta</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  <form [formGroup]=\\\"registerForm\\\">\\n    <!-- Name Field -->\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Nombre y Apellido</ion-label>\\n      <ion-input type=\\\"text\\\" formControlName=\\\"name\\\" [readonly]=\\\"!isEditEnabled\\\" required>\\n      </ion-input>\\n    </ion-item>\\n    <div *ngFor=\\\"let error of validationMessages.name\\\">\\n      <div class=\\\"error\\\">\\n        <ion-icon name=\\\"alert\\\" color=\\\"danger\\\"></ion-icon>\\n        <ion-text color=\\\"danger\\\">{{ error }}</ion-text>\\n      </div>\\n    </div>\\n\\n    <!-- Document ID Field -->\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Cédula</ion-label>\\n      <ion-input type=\\\"number\\\" formControlName=\\\"documentId\\\" [readonly]=\\\"!isEditEnabled\\\" required>\\n      </ion-input>\\n    </ion-item>\\n    <div *ngFor=\\\"let error of validationMessages.documentId\\\">\\n      <div class=\\\"error\\\">\\n        <ion-icon name=\\\"alert\\\" color=\\\"danger\\\"></ion-icon>\\n        <ion-text color=\\\"danger\\\">{{ error }}</ion-text>\\n      </div>\\n    </div>\\n\\n    <!-- Birthday Field -->\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Fecha de Nacimiento</ion-label>\\n      <ion-datetime displayFormat=\\\"MMM DD, YYYY\\\" formControlName=\\\"birthday\\\" value=\\\"1960-03-01\\\"\\n        [readonly]=\\\"!isEditEnabled\\\" required></ion-datetime>\\n    </ion-item>\\n    <div *ngFor=\\\"let error of validationMessages.birthday\\\">\\n      <div class=\\\"error\\\">\\n        <ion-icon name=\\\"alert\\\" color=\\\"danger\\\"></ion-icon>\\n        <ion-text color=\\\"danger\\\">{{ error }}</ion-text>\\n      </div>\\n    </div>\\n\\n    <!-- Phone Field -->\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Número telefónico</ion-label>\\n      <ion-input type=\\\"tel\\\" formControlName=\\\"phone\\\" [readonly]=\\\"!isEditEnabled\\\" required>\\n      </ion-input>\\n    </ion-item>\\n    <div *ngFor=\\\"let error of validationMessages.phone\\\">\\n      <div class=\\\"error\\\">\\n        <ion-icon name=\\\"alert\\\" color=\\\"danger\\\"></ion-icon>\\n        <ion-text color=\\\"danger\\\">{{ error }}</ion-text>\\n      </div>\\n    </div>\\n\\n    <!-- Email Field -->\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Correo electrónico</ion-label>\\n      <ion-input type=\\\"email\\\" formControlName=\\\"email\\\" [readonly]=\\\"!isEditEnabled\\\" required>\\n      </ion-input>\\n    </ion-item>\\n    <div *ngFor=\\\"let error of validationMessages.email\\\">\\n      <div class=\\\"error\\\">\\n        <ion-icon name=\\\"alert\\\" color=\\\"danger\\\"></ion-icon>\\n        <ion-text color=\\\"danger\\\">{{ error }}</ion-text>\\n      </div>\\n    </div>\\n\\n    <!-- Password Field -->\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Contraseña</ion-label>\\n      <ion-input type=\\\"password\\\" formControlName=\\\"password\\\" [readonly]=\\\"!isEditEnabled\\\"></ion-input>\\n    </ion-item>\\n    <div *ngFor=\\\"let error of validationMessages.password\\\">\\n      <div class=\\\"error\\\">\\n        <ion-icon name=\\\"alert\\\" color=\\\"danger\\\"></ion-icon>\\n        <ion-text color=\\\"danger\\\">{{ error }}</ion-text>\\n      </div>\\n    </div>\\n\\n    <!-- Password Validation Field -->\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Comprobar Contraseña</ion-label>\\n      <ion-input type=\\\"password\\\" formControlName=\\\"validPassword\\\" [readonly]=\\\"!isEditEnabled\\\"></ion-input>\\n    </ion-item>\\n    <div *ngFor=\\\"let error of validationMessages.validPassword\\\">\\n      <div class=\\\"error\\\">\\n        <ion-icon name=\\\"alert\\\" color=\\\"danger\\\"></ion-icon>\\n        <ion-text color=\\\"danger\\\">{{ error }}</ion-text>\\n      </div>\\n    </div>\\n\\n    <!-- Create Account Button -->\\n    <div class=\\\"ion-padding\\\">\\n      <ion-button expand=\\\"block\\\" type=\\\"submit\\\" class=\\\"ion-no-margin\\\" [disabled]=\\\"!isEditEnabled\\\">Guardar\\n      </ion-button>\\n    </div>\\n  </form>\\n  <div class=\\\"ion-padding\\\">\\n    <ion-button expand=\\\"block\\\" class=\\\"ion-no-margin\\\" color=\\\"light\\\" (click)=\\\"logOut()\\\">Cerrar sesión\\n    </ion-button>\\n  </div>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AccountPage } from './account.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AccountPage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AccountPageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AccountPage } from './account.page';\n\nimport { AccountPageRoutingModule } from './account-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule.forChild([{ path: '', component: AccountPage }]),\n    AccountPageRoutingModule,\n  ],\n  declarations: [AccountPage]\n})\nexport class AccountPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FjY291bnQvYWNjb3VudC5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { LoadingController } from '@ionic/angular';\nimport { AuthGuard } from 'src/resources/auth-guard';\nimport { UserService } from 'src/services/user.service';\n\n@Component({\n  selector: 'app-account',\n  templateUrl: 'account.page.html',\n  styleUrls: ['account.page.scss']\n})\nexport class AccountPage implements OnInit {\n\n  private loadingView\n  public isEditEnabled = false;\n  public editButtonTitle = 'Editar';\n  public validationMessages = {\n    name: [],\n    email: [],\n    password: [],\n    validPassword: [],\n    phone: [],\n    documentId: [],\n    birthday: []\n  };\n  public registerForm: FormGroup = new FormGroup({\n    name: new FormControl('', [Validators.required]),\n    email: new FormControl('', [Validators.email, Validators.required]),\n    password: new FormControl('', []),\n    validPassword: new FormControl('', []),\n    phone: new FormControl('', [Validators.required]),\n    documentId: new FormControl('', [Validators.required]),\n    birthday: new FormControl('', [Validators.required])\n  });\n\n  constructor(private router: Router, private userService: UserService, private loadingController: LoadingController) { }\n\n  ngOnInit() {\n    this.presentLoading();\n    this.userService.getSignedInUser().subscribe((user) => {\n      this.dismissLoading();\n      this.registerForm.get('name').setValue(user.full_name);\n      this.registerForm.get('email').setValue(user.email);\n      this.registerForm.get('phone').setValue(user.phone);\n      this.registerForm.get('documentId').setValue(user.cedula);\n    }, error => {\n      this.dismissLoading();\n      console.log(error);\n    })\n  }\n\n  /**\n   * Presenta una vista de carga mientras se envian los datos al servidor.\n   */\n  private async presentLoading() {\n    this.loadingView = await this.loadingController.create({\n      message: 'Cargando'\n    });\n    this.loadingView.present();\n  }\n\n  private dismissLoading() {\n    this.loadingView.dismiss();\n  }\n\n  public logOut() {\n    AuthGuard.removeUser();\n    this.router.navigate(['/login']);\n  }\n\n  public handleEdit() {\n    this.isEditEnabled = !this.isEditEnabled;\n    this.editButtonTitle = this.isEditEnabled ? 'Cancelar' : 'Editar';\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { AuthGuard } from 'src/resources/auth-guard';\nimport { User } from 'src/classes/user';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\n  constructor(private http: HttpClient) { }\n\n  public createUser(user) {\n    return this.http.post<User>('https://community-service-ucab.herokuapp.com/api/users', user);\n  }\n\n  public login(authInfo) {\n    return this.http.post<User>('https://community-service-ucab.herokuapp.com/api/login', authInfo);\n  }\n\n  public getSignedInUser() {\n    const localUser = AuthGuard.getUser();\n    const params = { email: localUser.email };\n    if (localUser !== null) {\n      return this.http.get<User>('https://community-service-ucab.herokuapp.com/api/user', { params });\n    }\n  }\n\n  public getUserByEmail(email) {\n    const params = { email };\n    return this.http.get<User>('https://community-service-ucab.herokuapp.com/api/user', { params });\n  }\n}\n"],"sourceRoot":"webpack:///"}